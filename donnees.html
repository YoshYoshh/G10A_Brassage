<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <title>DonnÃ©es moteur</title>
  <link rel="stylesheet" href="donnees.css">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
</head>

<body>
  <div class="container fade-in">
    <h1>ğŸ“Š DonnÃ©es en temps rÃ©el</h1>

    <div id="donnees-moteur">Chargement des donnÃ©es...</div>
  </div>

  <footer>
    <a href="acceuil.html">
      <button>ğŸ  Retour Ã  lâ€™accueil</button>
    </a>
  </footer>

  <script>
    function chargerDonnees() {
      fetch('api.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: 'commande=get_data'
      })
        .then(r => r.json())
        .then(data => {
          document.getElementById('donnees-moteur').innerText =
            `Vitesse : ${data.speed} RPM\nTempÃ©rature : ${data.temp} Â°C`;
        })
        .catch(() => {
          document.getElementById('donnees-moteur').innerText = "Erreur de lecture des donnÃ©es.";
        });
    }

    setInterval(chargerDonnees, 1000);
    chargerDonnees();
  </script>
</body>

</html>